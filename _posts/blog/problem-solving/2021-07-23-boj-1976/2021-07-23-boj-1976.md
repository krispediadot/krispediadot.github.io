---
layout: post
title: ë°±ì¤€ 1976. ì—¬í–‰ê°€ì
date: 2021-07-23 11:00:00 +09:00
modified: 
category: problem-solving
tags: [ps, c++, graph]
image: "/assets/img/avatar_code.png"
cover: "../puzzle.jpg"
---

**Index**
1. [ë¬¸ì œ ë§í¬](#ë¬¸ì œ-ë§í¬)
1. [ë‚˜ì˜ ìƒê°ì˜ íë¦„](#ë‚˜ì˜-ìƒê°ì˜-íë¦„)
1. [ë¬¸ì œì˜ ì£¼ìš” ë‚´ìš© ë° ì²˜ë¦¬ ë°©ì•ˆ](#ë¬¸ì œì˜-ì£¼ìš”-ë‚´ìš©-ë°-ì²˜ë¦¬-ë°©ì•ˆ)
1. [ì½”ë“œ êµ¬í˜„](#ì½”ë“œ-êµ¬í˜„)
1. [ì „ì²´ ì½”ë“œ](#ì „ì²´-ì½”ë“œ)

### ë¬¸ì œ ë§í¬
[https://www.acmicpc.net/problem/1976](https://www.acmicpc.net/problem/1976)

### ë‚˜ì˜ ìƒê°ì˜ íë¦„
ğŸ’¡ [1ì°¨ ì‹œë„ - ì‹¤íŒ¨]<br> 
    union-find<br>
    ì…ë ¥ì˜ ì—´ ê°œìˆ˜ë¥¼ í—·ê°ˆë¦¼.<br>
<br>
ğŸ’¡ [2ì°¨ ì‹œë„ - ì„±ê³µ]<br> 

****ì…ë ¥ ë²”ìœ„ ì£¼ì˜í•´ì„œ ì •ì˜í•˜ê¸°!!!**

### ë¬¸ì œì˜ ì£¼ìš” ë‚´ìš© ë° ì²˜ë¦¬ ë°©ì•ˆ
1. ë‘ ë„ì‹œ ì—°ê²° ìƒíƒœ  â†’ ì¸ì ‘ í–‰ë ¬ë¡œ ì…ë ¥ì´ ë“¤ì–´ì˜¤ì§€ë§Œ ê° edge ì •ë³´ë§Œ ì €ì¥<br>
1. ë°©ë¬¸í•˜ê³ ì í•˜ëŠ” ë„ì‹œ â†’ ë°°ì—´ì— ë„ì‹œ ì¸ë±ìŠ¤ ì €ì¥<br>
1. ë°©ë¬¸ ë„ì‹œ ì ‘ê·¼ ê°€ëŠ¥ì„± í™•ì¸ â†’ union-findë¡œ ê°™ì€ ì§‘í•©ì— ì†í•˜ëŠ”ì§€ í™•ì¸<br>

### ì½”ë“œ êµ¬í˜„ 
1. **ê° edge ì •ë³´ë§Œ ì €ì¥**<br>
    <br>
    ì¸ì ‘ í–‰ë ¬ë¡œ ì£¼ì–´ì§€ëŠ” ë„ì‹œ ì‚¬ì´ ì—°ê²° ìƒíƒœë¥¼ edgeë§Œ ê¸°ì¤€ìœ¼ë¡œ ì €ì¥<br>
    ```cpp
    int N, M; cin >> N >> M;
    vector<pair<int, int>> edges;

    for (int i = 1; i <= N; i++) {
		for (int j = 1; j <= N; j++) {
			int num; cin >> num;
			if (num)
				edges.push_back({ i, j });
		}
	}
    ```
    <br>    
1. **ë°°ì—´ì— ë„ì‹œ ì¸ë±ìŠ¤ ì €ì¥**<br>
    <br>
    ```cpp
    vector<int> cities(M);

    for (int i = 0; i < M; i++)
		cin >> cities[i];
    ```
    <br>
1. **union-findë¡œ ê°™ì€ ì§‘í•©ì— ì†í•˜ëŠ”ì§€ í™•ì¸**<br>
    <br>
    ê° ë„ì‹œì˜ parent ì €ì¥í•  ë°°ì—´ ìƒì„±<br>
    ```cpp
    vector<int> parents(N + 1);
	for (int i = 1; i <= N; i++) parents[i] = i;
    ```
    <br>
    íƒ€ê²Ÿ ë…¸ë“œì˜ ë¶€ëª¨ ë…¸ë“œê°€ ë¬´ì—‡ì¸ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜ `findParent()` êµ¬í˜„<br>
    <br>
    ```cpp
    int findParent(vector<int>& parents, int idx) {
        if (parents[idx] == idx) return idx;
        return parents[idx] = findParent(parents, parents[idx]);
    }
    ```
    <br>
    ë¶€ëª¨ê°€ ë‹¤ë¥¸ ë‘ ë…¸ë“œë¥¼ ì—°ê²°í•˜ëŠ” í•¨ìˆ˜ `unionParent()` êµ¬í˜„<br>
    ```cpp
    void unionParent(vector<int>& parents, int& e1, int& e2) {
        int p1 = findParent(parents, e1);
        int p2 = findParent(parents, e2);

        parents[p1] = p2;
    }
    ```
    <br>
    ì—ì§€ ì—°ê²°<br>
    ```cpp
    for (auto& edge : edges) {
		if (findParent(parents, edge.first) != findParent(parents, edge.second)) {
			unionParent(parents, edge.first, edge.second);
		}
	}
    ```
    <br>
    ìµœì¢… ë¶€ëª¨ ë…¸ë“œ ì •ë³´ ì—†ë°ì´íŠ¸<br>
    ```cpp
    for (int i = 0; i < N; i++)
		parents[i] = findParent(parents, i);
    ```
    <br>
    ë°©ë¬¸í•˜ë ¤ëŠ” ë„ì‹œ ì „ì²´ê°€ ê°™ì€ ê·¸ë£¹ì— ì†í•˜ëŠ”ì§€ í™•ì¸<br>
    ```cpp
    // 2. ê°™ì€ ê·¸ë£¹ì— ì†í•˜ëŠ”ì§€ í™•ì¸
	int base = parents[cities[0]];
	for (int i = 1; i < M; i++) {
		if (parents[cities[i]] != base)
			return "NO";
	}
	return "YES";
    ```
    <br>
    
### ì „ì²´ ì½”ë“œ
```cpp
#include <iostream>
#include <vector>
#include <string>
#include <queue>

using namespace std;

int findParent(vector<int>& parents, int idx) {
	if (parents[idx] == idx) return idx;
	return parents[idx] = findParent(parents, parents[idx]);
}

void unionParent(vector<int>& parents, int& e1, int& e2) {
	int p1 = findParent(parents, e1);
	int p2 = findParent(parents, e2);

	parents[p1] = p2;
}

string solution(vector<pair<int, int>>& edges, vector<int>& cities, int& N, int& M) {

	// 1. union-find 
	vector<int> parents(N + 1);
	for (int i = 1; i <= N; i++) parents[i] = i;

	for (auto& edge : edges) {
		if (findParent(parents, edge.first) != findParent(parents, edge.second)) {
			unionParent(parents, edge.first, edge.second);
		}
	}

	for (int i = 0; i < N; i++)
		parents[i] = findParent(parents, i);

	// 2. ê°™ì€ ê·¸ë£¹ì— ì†í•˜ëŠ”ì§€ í™•ì¸
	int base = parents[cities[0]];
	for (int i = 1; i < M; i++) {
		if (parents[cities[i]] != base)
			return "NO";
	}
	return "YES";
}

int main() {
	ios_base::sync_with_stdio(false);
	cin.tie(NULL);

	int N, M; cin >> N >> M;
	vector<pair<int, int>> edges;
	vector<int> cities(M);

	for (int i = 1; i <= N; i++) {
		for (int j = 1; j <= N; j++) {
			int num; cin >> num;
			if (num)
				edges.push_back({ i, j });
		}
	}

	for (int i = 0; i < M; i++)
		cin >> cities[i];

	cout << solution(edges, cities, N, M);

	return 0;
}
```