---
layout: post
title: ë°±ì¤€ 17471. ê²Œë¦¬ë§¨ë”ë§
date: 2021-04-02 16:20:00 +09:00
modified: 
category: algorithms
tags: [ps, c++, simulation]
image: "/assets/img/avatar_code.png"
cover: "../puzzle.jpg"
---

**Index**
1. [ë¬¸ì œ ë§í¬](#ë¬¸ì œ-ë§í¬)
1. [ë‚˜ì˜ ìƒê°ì˜ íë¦„](#ë‚˜ì˜-ìƒê°ì˜-íë¦„)
1. [ë¬¸ì œì˜ ì£¼ìš” ë‚´ìš© ë° ì²˜ë¦¬ ë°©ì•ˆ](#ë¬¸ì œì˜-ì£¼ìš”-ë‚´ìš©-ë°-ì²˜ë¦¬-ë°©ì•ˆ)
1. [ì½”ë“œ êµ¬í˜„](#ì½”ë“œ-êµ¬í˜„)
1. [ì „ì²´ ì½”ë“œ](#ì „ì²´-ì½”ë“œ)

### ë¬¸ì œ ë§í¬
[https://www.acmicpc.net/problem/17471](https://www.acmicpc.net/problem/17471)

### ë‚˜ì˜ ìƒê°ì˜ íë¦„
ğŸ’¡ [1ì°¨ ì‹œë„ - ì‹¤íŒ¨] â‡¢ í‹€ë ¸ìŠµë‹ˆë‹¤.<br>
    ê·¸ë˜í”„ êµ¬ì¡°ë¥¼ ì´ë™í•˜ë©° ì„ íƒ/ë¹„ì„ íƒ ê²½ìš°ë¥¼ í™•ì¸<br>
ğŸ’¡ [2ì°¨ ì‹œë„ - ì„±ê³µ]<br>
    flagë¡œ ì„ íƒ í›„ ì—°ê²° ê°€ëŠ¥í•œì§€ í™•ì¸<br>

****ë¬¸ì œ ë‚´ìš© ìì„¸íˆ ì½ê¸°!!**

### ë¬¸ì œì˜ ì£¼ìš” ë‚´ìš© ë° ì²˜ë¦¬ ë°©ì•ˆ
1. ì—°ê²° ìƒíƒœ ì •ë³´ ì €ì¥ â†’ 2ì°¨ì› ë²¡í„° ì‚¬ìš©
1. ê° ìœ„ì¹˜ë³„ ì¸êµ¬ìˆ˜ ë° ì „ì²´ ì¸êµ¬ìˆ˜ ê³„ì‚° 
1. ìœ„ì¹˜ ì„ íƒì˜ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ â†’ `next_permutation()` ì‚¬ìš©
1. ì„ íƒëœ ìœ„ì¹˜ ì—°ê²° ê°€ëŠ¥í•œì§€ í™•ì¸ â†’ dfs ì‚¬ìš©
1. ì¸ì›ìˆ˜ ì°¨ì´ ë¹„êµ â†’ ì „ì²´ ì¸ì›ìˆ˜ ë¯¸ë¦¬ ê³„ì‚° í•´ë†“ê³  ì„ íƒí•œ ìœ„ì¹˜ì˜ ì¸ì› ê³„ì‚°


### ì½”ë“œ êµ¬í˜„ 
1. **ì—°ê²° ìƒíƒœ ì •ë³´ 2ì°¨ì› ë²¡í„° ì‚¬ìš©**<br>
    ì…ë ¥ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ì—°ê²° ìƒíƒœ ì •ë³´ë¥¼ 2ì°¨ì› ë²¡í„°ë¥¼ ì„ ì–¸í•´ì„œ ì €ì¥í•œë‹¤.<br>
    ```c++
    vector<vector<int>> conn; // ì „ì—­ë³€ìˆ˜

    // ë©”ì¸í•¨ìˆ˜ ë‚´ 
    cin >> N;
    conn.resize(N);
    for (int i = 0; i < N; i++) {
        int cnt; cin >> cnt;
        conn[i].resize(cnt);
        for (int j = 0; j < cnt; j++) {
            int num; cin >> num;
            conn[i][j] = num - 1;
        }
    }
    ``` 
    <br>
1. **ê° ìœ„ì¹˜ë³„ ì¸êµ¬ìˆ˜ ë° ì „ì²´ ì¸êµ¬ìˆ˜ ê³„ì‚°**<br>
    ì…ë ¥ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ì¸êµ¬ ìˆ˜ ì •ë³´ë¥¼ 1ì°¨ì› ë²¡í„°ì— ì €ì¥í•œë‹¤.<br>
    ë°ì´í„°ë¥¼ ë°›ì„ ë•Œ ì´í›„ ì‚¬ìš©í•  ì „ì²´ ì¸êµ¬ìˆ˜ë„ ê³„ì‚°í•´ë‘”ë‹¤.<br>
    ```c++
    int total_population; // ì „ì—­ë³€ìˆ˜
    vector<int> population; // ì „ì—­ë³€ìˆ˜

    // ë©”ì¸í•¨ìˆ˜ ë‚´ 
    population.resize(N);
    for (int i = 0; i < N; i++) {
        cin >> population[i];
        total_population += population[i];
    }
    ```
    <br>
1. **ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ í™•ì¸ì„ ìœ„í•´ `next_permutation()` ì‚¬ìš©**<br>
    <br>
    ë³€ìˆ˜ `i`ë¥¼ ì„ íƒí•  ìœ„ì¹˜ì˜ ê°œìˆ˜ë¡œ ë‘ê³  1ê°œì—ì„œ ë¶€í„° N - 1ê°œ ê¹Œì§€ ì„ íƒí•˜ë„ë¡ ì„¤ì •<br>
    ```c++
    #include <climits>
    #include <algorithm>

    int solution() {
        int answer = INT_MAX;

        for (int i = 1; i < N; i++) {
            rflags.clear();
            rflags.resize(N, 1);

            for (int j = 0; j < i; j++) rflags[j] = 0;

            do {
                get_min_diff(answer);
            } while (next_permutation(rflags.begin(), rflags.end()));
        }

        return answer;
    }
    ```
    <br>
1. **ì—°ê²° ê°€ëŠ¥í™•ì¸ì„ ìœ„í•´ dfs ì‚¬ìš©**<br>
    <br>
    ```c++
    bool is_connected(vector<int>& v) {
        vector<bool> visited(N, false);

        queue<int> q;
        visited[v[0]] = true;
        q.push(v[0]);
        
        while (!q.empty()) {
            auto target = q.front(); q.pop();

            for (auto c : conn[target]) {
                
                if (find(v.begin(), v.end(), c) == v.end()) continue;
                if (visited[c] == true) continue;
                
                visited[c] = true;
                q.push(c);
            }
        }

        for (auto c : v) {
            if (visited[c] == false) return false;
        }
        return true;
    }
    ```
    <br>
1. **ì¸ì›ìˆ˜ ì°¨ì´ ë¹„êµ**<br> 
    ```c++
    void get_min_diff(int& answer) {
        vector<int> red, blue;

        for (int i = 0; i < N; i++) {
            rflags[i] == 1 ? red.push_back(i) : blue.push_back(i); 
        }

        // ê°™ì€ ê·¸ë£¹ì— ì†í•˜ëŠ”ì§€ í™•ì¸
        if (is_connected(red) == false || is_connected(blue) == false) 
            return;

        int sum_red_population = 0;
        for (auto r : red) sum_red_population += population[r];

        answer = min(answer, abs(sum_red_population - (total_population - sum_red_population)));
    }
    ```
    <br>

### ì „ì²´ ì½”ë“œ
```c++
#include <iostream>
#include <vector>
#include <cmath>
#include <climits>
#include <algorithm>
#include <queue>

using namespace std;

int N;
int total_population;
vector<int> population;
vector<vector<int>> conn;
vector<int> rflags;

bool is_connected(vector<int>& v) {
    vector<bool> visited(N, false);

    queue<int> q;
    visited[v[0]] = true;
    q.push(v[0]);
    
    while (!q.empty()) {
        auto target = q.front(); q.pop();

        for (auto c : conn[target]) {
            
            if (find(v.begin(), v.end(), c) == v.end()) continue;
            if (visited[c] == true) continue;
            
            visited[c] = true;
            q.push(c);
        }
    }

    for (auto c : v) {
        if (visited[c] == false) return false;
    }
    return true;
}

void get_min_diff(int& answer) {
    vector<int> red, blue;

    for (int i = 0; i < N; i++) {
        rflags[i] == 1 ? red.push_back(i) : blue.push_back(i); 
    }

    // ê°™ì€ ê·¸ë£¹ì— ì†í•˜ëŠ”ì§€ í™•ì¸
    if (is_connected(red) == false || is_connected(blue) == false) 
        return;

    int sum_red_population = 0;
    for (auto r : red) sum_red_population += population[r];

    answer = min(answer, abs(sum_red_population - (total_population - sum_red_population)));
}

int solution() {
    int answer = INT_MAX;

    for (int i = 1; i < N; i++) {
        rflags.clear();
        rflags.resize(N, 1);

        for (int j = 0; j < i; j++) rflags[j] = 0;

        do {
            get_min_diff(answer);
        } while (next_permutation(rflags.begin(), rflags.end()));
    }

    return answer;
}

int main() {
    cin >> N;

    population.resize(N);
    for (int i = 0; i < N; i++) {
        cin >> population[i];
        total_population += population[i];
    }

    conn.resize(N);
    for (int i = 0; i < N; i++) {
        int cnt; cin >> cnt;
        conn[i].resize(cnt);
        for (int j = 0; j < cnt; j++) {
            int num; cin >> num;
            conn[i][j] = num - 1;
        }
    }

    int result = solution();

    if (result == INT_MAX) cout << -1 << endl;
    else cout << result << endl;

}
```
