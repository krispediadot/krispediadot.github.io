---
layout: post
title: ë°±ì¤€ 17281. âš¾ï¸
date: 2021-04-05 18:00:00 +09:00
modified: 
category: problem solving
tags: [ps, c++, simulation]
image: "/assets/img/avatar_code.png"
cover: "../puzzle.jpg"
---

**Index**
1. [ë¬¸ì œ ë§í¬](#ë¬¸ì œ-ë§í¬)
1. [ë‚˜ì˜ ìƒê°ì˜ íë¦„](#ë‚˜ì˜-ìƒê°ì˜-íë¦„)
1. [ë¬¸ì œì˜ ì£¼ìš” ë‚´ìš© ë° ì²˜ë¦¬ ë°©ì•ˆ](#ë¬¸ì œì˜-ì£¼ìš”-ë‚´ìš©-ë°-ì²˜ë¦¬-ë°©ì•ˆ)
1. [ì½”ë“œ êµ¬í˜„](#ì½”ë“œ-êµ¬í˜„)
1. [ì „ì²´ ì½”ë“œ](#ì „ì²´-ì½”ë“œ)

### ë¬¸ì œ ë§í¬
[https://www.acmicpc.net/problem/17281](https://www.acmicpc.net/problem/17281)

### ë‚˜ì˜ ìƒê°ì˜ íë¦„
ğŸ’¡ [1ì°¨ ì‹œë„ - ì‹¤íŒ¨] â‡¢ ì‹œê°„ì´ˆê³¼<br> 
    `<algorithm>` í—¤ë”ì˜ `next_permutation` ì‚¬ìš©<br>
ğŸ’¡ [2ì°¨ ì‹œë„ - ì„±ê³µ]<br> 
    ìˆœì—´ recursionìœ¼ë¡œ êµ¬í˜„<br>

****`next_permutation` ì‹œê°„ ì´ˆê³¼ ì£¼ì˜**

### ë¬¸ì œì˜ ì£¼ìš” ë‚´ìš© ë° ì²˜ë¦¬ ë°©ì•ˆ
1. ì„ ìˆ˜ë“¤ì˜ lineup ëª¨ë“  ê²½ìš° â†’ recursionìœ¼ë¡œ ëª¨ë“  ê²½ìš° í™•ì¸<br>
1. ê²½ê¸° ë°©ì‹ â†’ `play` í•¨ìˆ˜ êµ¬í˜„<br>


### ì½”ë“œ êµ¬í˜„ 
1. **recursionìœ¼ë¡œ ëª¨ë“  ê²½ìš° í™•ì¸**<br>
    1ë²ˆ ì„ ìˆ˜ëŠ” 4ë²ˆ íƒ€ìë¡œ í™•ì •ì´ë¯€ë¡œ 2 ~ 9ë²ˆ ì„ ìˆ˜ì˜ lineupë§Œ ë³€ê²½<br>
    ```cpp
    void solution(vector<int> lineup, vector<bool> done, int& answer) {
        if (lineup.size() == PLAYER_TOTAL) {
            answer = max(answer, play(lineup));
            return;
        }

        if (lineup.size() == 3) {
            lineup.push_back(0);
            solution(lineup, done, answer);
            lineup.pop_back();
        }
        
        else {
            for (int idx = 1; idx < PLAYER_TOTAL; idx++) {
                if (done[idx] == false) {
                    lineup.push_back(idx);
                    done[idx] = true;
                    solution(lineup, done, answer);
                    done[idx] = false;
                    lineup.pop_back();
                }
            }
        }
    }
    ```
    <br>
1. **`play` í•¨ìˆ˜ êµ¬í˜„**<br>
    ê²½ê¸° ë°©ì‹ì„ ì½”ë“œë¡œ ì‘ì„±<br>
    ```c++
    int play(vector<int>& lineup) {
        int score = 0;
        int lineup_idx = 0;
        
        for (int round_idx = 0; round_idx < N; round_idx++) {
            vector<int> doru;
            int out_cnt = 0;

            while (out_cnt < 3) {
                // 1. ì„ ìˆ˜ê°€ ê³µ ì¹˜ê¸°
                int player_idx = lineup[lineup_idx];
                int stat = player_info[round_idx][player_idx];

                // 2. ì•„ì›ƒì´ë©´ ë
                if (stat == 0) out_cnt++;

                // 3. ì•„ì›ƒì´ ì•„ë‹ˆë©´ ì´ë™
                else {

                    // 4. ì¶œë£¨í•´ìˆë˜ ì„ ìˆ˜ë“¤ ì›€ì§ì´ê¸°
                    while (doru.size() > 0 && doru.front() + stat > 3) {
                        doru.erase(doru.begin());
                        score++;
                    }

                    for (int idx = 0; idx < doru.size(); idx++)
                        doru[idx] += stat;

                    // 5. í™ˆëŸ°ì´ë©´ ì ìˆ˜ ì¶”ê°€
                    if (stat == 4) score++;

                    // 6. í™ˆëŸ° ì•„ë‹ˆë©´ ì¶œë£¨
                    else doru.push_back(stat);
                }

                // 7. ë‹¤ìŒ ì„ ìˆ˜ ëŒ€ê¸°
                lineup_idx = (lineup_idx + 1) % PLAYER_TOTAL;
            }
        }

        return score;
    }
    ```
    <br>

### ì „ì²´ ì½”ë“œ
```c++
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

const int PLAYER_TOTAL = 9;

int N;
vector<vector<int>> player_info; // [round_idx][player_idx] = stat

int play(vector<int>& lineup) {
    int score = 0;
    int lineup_idx = 0;
    
    for (int round_idx = 0; round_idx < N; round_idx++) {
        vector<int> doru;
        int out_cnt = 0;

        while (out_cnt < 3) {
            // 1. ì„ ìˆ˜ê°€ ê³µ ì¹˜ê¸°
            int player_idx = lineup[lineup_idx];
            int stat = player_info[round_idx][player_idx];

            // 2. ì•„ì›ƒì´ë©´ ë
            if (stat == 0) out_cnt++;

            // 3. ì•„ì›ƒì´ ì•„ë‹ˆë©´ ì´ë™
            else {

                // 4. ì¶œë£¨í•´ìˆë˜ ì„ ìˆ˜ë“¤ ì›€ì§ì´ê¸°
                while (doru.size() > 0 && doru.front() + stat > 3) {
                    doru.erase(doru.begin());
                    score++;
                }

                for (int idx = 0; idx < doru.size(); idx++)
                    doru[idx] += stat;

                // 5. í™ˆëŸ°ì´ë©´ ì ìˆ˜ ì¶”ê°€
                if (stat == 4) score++;

                // 6. í™ˆëŸ° ì•„ë‹ˆë©´ ì¶œë£¨
                else doru.push_back(stat);
            }

            // 7. ë‹¤ìŒ ì„ ìˆ˜ ëŒ€ê¸°
            lineup_idx = (lineup_idx + 1) % PLAYER_TOTAL;
        }
    }

    return score;
}

void solution(vector<int> lineup, vector<bool> done, int& answer) {
    if (lineup.size() == PLAYER_TOTAL) {
        answer = max(answer, play(lineup));
        return;
    }

    if (lineup.size() == 3) {
        lineup.push_back(0);
        solution(lineup, done, answer);
        lineup.pop_back();
    }
    
    else {
        for (int idx = 1; idx < PLAYER_TOTAL; idx++) {
            if (done[idx] == false) {
                lineup.push_back(idx);
                done[idx] = true;
                solution(lineup, done, answer);
                done[idx] = false;
                lineup.pop_back();
            }
        }
    }
}

int main() {
    cin >> N;

    player_info.resize(N, vector<int>(PLAYER_TOTAL, 0));
    for (int round_idx = 0; round_idx < N; round_idx++) {
        for (int player_idx = 0; player_idx < PLAYER_TOTAL; player_idx++) {
            cin >> player_info[round_idx][player_idx];
        }
    }

    int answer = 0;
    vector<int> lineup;
    vector<bool> done(PLAYER_TOTAL, false);

    solution(lineup, done, answer);
    cout << answer << endl;
    
    return 0;
}
```
