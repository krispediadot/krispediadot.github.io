---
layout: post
title: ë°±ì¤€ 9205. ë§¥ì£¼ ë§ˆì‹œë©´ì„œ ê±¸ì–´ê°€ê¸°
date: 2021-03-26 16:20:00 +09:00
modified: 
category: problem solving
tags: [ps, c++, bfs]
image: "/assets/img/avatar_code.png"
cover: "../puzzle.jpg"
---

### ë¬¸ì œ ë§í¬
[https://www.acmicpc.net/problem/9205](https://www.acmicpc.net/problem/9205)

### ë‚˜ì˜ ìƒê°ì˜ íë¦„
ğŸ’¡ [1ì°¨ ì‹œë„ - ì„±ê³µ]<br>
    bfs ì‚¬ìš©<br>

### ë¬¸ì œì˜ ì£¼ìš” ë‚´ìš© ë° ì²˜ë¦¬ ë°©ì•ˆ
1. í¸ì˜ì  ìœ„ì¹˜ ì €ì¥ â†’ set<pair<int, int>> shops
1. ë°©ë¬¸í–ˆë˜ ìœ„ì¹˜ ì €ì¥í•˜ê¸° â†’ set<pair<int, int>> visited_shops
1. ë‘ ì¢Œí‘œ ì‚¬ë¦¬ì˜ ê±°ë¦¬ êµ¬í•˜ê¸° â†’ get_distance() í•¨ìˆ˜ ì„ ì–¸
1. ê°€ëŠ¥ì„± í™•ì¸ â†’ bfs

### ì½”ë“œ êµ¬í˜„ 
1. **set<pair<int, int>> shops**<br>
    í¸ì˜ì ì˜ ìœ„ì¹˜ëŠ” ê²€ìƒ‰ê³¼ ì œê±°ê°€ í¸ë¦¬í•˜ë„ë¡ setì— ë‹´ì•„ë‘”ë‹¤.<br>
    ì§€ë„ì˜ ìµœëŒ€ ì—´ ê¸¸ì´ë¥¼ ì‚¬ìš©í•´ì„œ unordered_setì„ ì‚¬ìš©í•´ë„ ëœë‹¤.<br>
    <br>
1. **set<pair<int, int>> visited_shops**<br>
    bfsë¡œ í¸ì˜ì ì„ ë°©ë¬¸í•  ìˆ˜ ìˆëŠ”ë° í•œ ë²ˆ ë°©ë¬¸í–ˆë˜ ê³³ì„ ë‹¤ì‹œ ë°©ë¬¸í•˜ëŠ” ì¼ì´ ì—†ë„ë¡ (ë¬´í•œ ë£¨í”„ì— ë¹ ì§€ì§€ ì•Šë„ë¡) vistied_shopsì— í‘œì‹œí•´ ë‘ê³  ì‹¤ì œ `set<pair<int, int>> shops` ì—ì„œ ì œê±°í•´ì¤˜ì•¼ í•œë‹¤.<br>
    <br>
1. **get_distance() í•¨ìˆ˜ ì„ ì–¸**<br>
    ë¬¸ì œì—ì„œ ë‘ ì¢Œí‘œ ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ x ì¢Œí‘œì˜ ì°¨ì´ + y ì¢Œí‘œì˜ ì°¨ì´(ë§¨í•´íŠ¼ ê±°ë¦¬)ë¡œ ê³„ì‚°í•œë‹¤ê³  ì„¤ëª…í•´ì£¼ì—ˆë‹¤.<br>
    ê·¸ì— ë”°ë¼ `get_distance()` ëŒë‹¤ í•¨ìˆ˜ë¥¼ ì„ ì–¸í–ˆë‹¤.<br>
    ```c++
    #include <cmath>
    auto get_distance = [](pair<int, int>& a, pair<int, int>& b) {
        return abs(a.first - b.first) + abs(a.second - b.second);
    };
    ```
    <br>
1. **bfs**<br>
    ìƒê·¼ì´ë„¤ ì§‘(from)ì—ì„œ ë½ í˜ìŠ¤í‹°í„ ì¥ì†Œ(to)ê¹Œì§€ ì´ë™í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ bfsë¡œ í™•ì¸í•œë‹¤.<br>
    <br>
    bfsì—ì„œ ë‹¤ìŒ ì¢Œí‘œë¥¼ ë°©ë¬¸ í• ê²ƒì¸ê°€ ì•„ë‹Œê°€ë¥¼ íŒë‹¨í•˜ëŠ” ê¸°ì¤€ì´ í•„ìš”í•˜ë‹¤.<br>
    ë¬¸ì œì—ì„œ ë§¥ì£¼ 1ë°•ìŠ¤(20ê°œ)ë¡œ 50ë¯¸í„°/1ë§¥ì£¼ì˜ ê¸¸ì´ë§Œ ê°ˆ ìˆ˜ ìˆë‹¤ê³  ì„¤ëª…í–ˆìœ¼ë‹ˆ<br> <mark>ìµœì¥ ì´ë™ ê°€ëŠ¥í•œ ê±°ë¦¬ëŠ” 20x50 = 1000 ë¯¸í„°ì´ë‹¤.</mark><br>
    ë”°ë¼ì„œ 1000ë¯¸í„° ì´ë‚´ì— ë„ì°© ì¥ì†Œê°€ ìˆê±°ë‚˜ í¸ì˜ì ì´ ìˆìœ¼ë©´ ë°©ë¬¸í•œë‹¤ëŠ” ê¸°ì¤€ì„ ì„¸ì› ë‹¤.<br>
    ê·¸ì— ë”°ë¼ ì‘ì„±í•œ `solution()` í•¨ìˆ˜ì˜ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.<br> 
    ```c++
    #include <queue>
    #include <set>
    #include <string>

    string solution(pair<int, int>& from, pair<int, int>& to, set<pair<int, int>>& shops) {
        auto get_distance = [](pair<int, int>& a, pair<int, int>& b) {
            return abs(a.first - b.first) + abs(a.second - b.second);
        };
        
        queue<pair<int, int>> q;
        q.push(from);

        while (!q.empty()) {
            auto target = q.front(); q.pop();

            // 1. í˜„ì¬ ìƒíƒœë¡œ í˜ìŠ¤í‹°ë²Œ ì¥ì†Œì— ê°ˆ ìˆ˜ ìˆìœ¼ë©´ ë
            if (get_distance(target, to) <= BEER_BOX * MAX_METER) 
                return "happy";

            // 2. ëª»ê°€ë©´ í¸ì˜ì  ë“¤ë ¤ì„œ ë§¥ì£¼ ì‚¬ì•¼í•¨
            set<pair<int, int>> visited_shop;

            for (auto shop : shops) {
                int distance = get_distance(target, shop);
                if (distance <= BEER_BOX * MAX_METER) {
                    q.push(shop);
                    visited_shop.insert(shop);
                }
            }

            for (auto& shop : visited_shop) shops.erase(shops.find(shop));
        }

        return "sad";
    }
    ```
    <br>

### ì „ì²´ ì½”ë“œ
```c++
#include <iostream>
#include <vector>
#include <string>
#include <queue>
#include <set>
#include <cmath>

using namespace std;

const int BEER_BOX = 20;
const int MAX_METER = 50;

// ìƒê·¼ì´ë„¤ì—ì„œ ì¶œë°œ, ë§¥ì£¼ 1ë°•ìŠ¤(20ê°œ)
// 50ë¯¸í„°ì— ë§¥ì£¼ 1ë³‘
// í¸ì˜ì ì—ì„œ ë¹ˆë³‘ ë²„ë¦¬ê³  ìƒˆ ë§¥ì£¼ êµ¬ë§¤ ê°€ëŠ¥
// ë§¥ì£¼ 20ê°œ ë„˜ì„ ìˆ˜ ì—†ìŒ
// ìƒê·¼ì´ ì§‘ì—ì„œ í˜ìŠ¤í‹°ë²Œ ì¥ì†Œê¹Œì§€ í–‰ë³µí•˜ê²Œ ë„ì°© ê°€ëŠ¥ = "happy" / ë¶ˆê°€ëŠ¥ = "sad"
string solution(pair<int, int>& from, pair<int, int>& to, set<pair<int, int>>& shops) {
    auto get_distance = [](pair<int, int>& a, pair<int, int>& b) {
        return abs(a.first - b.first) + abs(a.second - b.second);
    };
    
    queue<pair<int, int>> q;
    q.push(from);

    while (!q.empty()) {
        auto target = q.front(); q.pop();

        // 1. í˜„ì¬ ìƒíƒœë¡œ í˜ìŠ¤í‹°ë²Œ ì¥ì†Œì— ê°ˆ ìˆ˜ ìˆìœ¼ë©´ ë
        if (get_distance(target, to) <= BEER_BOX * MAX_METER) 
            return "happy";

        // 2. ëª»ê°€ë©´ í¸ì˜ì  ë“¤ë ¤ì„œ ë§¥ì£¼ ì‚¬ì•¼í•¨
        set<pair<int, int>> visited_shop;

        for (auto shop : shops) {
            int distance = get_distance(target, shop);
            if (distance <= BEER_BOX * MAX_METER) {
                q.push(shop);
                visited_shop.insert(shop);
            }
        }

        for (auto& shop : visited_shop) shops.erase(shops.find(shop));
    }

    return "sad";
}

int main() {
    int t; cin >> t;
    while (t--) {
        int n; cin >> n;
        pair<int, int> from {0, 0}; cin >> from.first >> from.second;
        set<pair<int, int>> shops;
        for (int i = 0; i < n; i++) {
            pair<int, int> loc {0, 0};
            cin >> loc.first >> loc.second;
            shops.insert(loc);
        }
        pair<int, int> to {0, 0}; cin >> to.first >> to.second;

        cout << solution(from, to, shops) << endl;
    }
}
```
