---
layout: post
title: ë°±ì¤€ 17406. ë°°ì—´ ëŒë¦¬ê¸° 4
date: 2021-04-04 10:20:00 +09:00
modified: 
category: problem solving
tags: [ps, c++, simulation]
image: "/assets/img/avatar_code.png"
cover: "../puzzle.jpg"
---

### ë¬¸ì œ ë§í¬
[https://www.acmicpc.net/problem/17406](https://www.acmicpc.net/problem/17406)

### ë‚˜ì˜ ìƒê°ì˜ íë¦„
ğŸ’¡ [1ì°¨ ì‹œë„ - ì„±ê³µ]<br> 
    45:00<br>
    flagë¡œ ì„ íƒ í›„ ì—°ê²° ê°€ëŠ¥í•œì§€ í™•ì¸<br>

****ë¬¸ì œ ë‚´ìš© ìì„¸íˆ ì½ê¸°!!**

### ë¬¸ì œì˜ ì£¼ìš” ë‚´ìš© ë° ì²˜ë¦¬ ë°©ì•ˆ
1. ë°°ì—´ ì •ë³´ ì €ì¥ â†’ 2ì°¨ì› ë²¡í„°ì— ë°°ì—´ ì •ë³´ ì €ì¥
1. íšŒì „ ì—°ì‚° ì €ì¥ â†’ `vector<int>(3)` í˜•ì‹ìœ¼ë¡œ íšŒì „ ì—°ì‚° ì €ì¥
1. ëª¨ë“  ê²½ìš° ì‚´í´ë³´ê¸° â†’ `next_permutation()` ì‚¬ìš©
1. ê¼­ì§€ì  ê¸°ì¤€ ì‹œê³„ë°©í–¥ íšŒì „ â†’ `apply_op()` í•¨ìˆ˜ ì‘ì„±

### ì½”ë“œ êµ¬í˜„ 
1. **2ì°¨ì› ë²¡í„°ì— ë°°ì—´ ì •ë³´ ì €ì¥**<br>
    ì…ë ¥ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ë°°ì—´ ì •ë³´ë¥¼ 2ì°¨ì› ë²¡í„°ë¥¼ ì„ ì–¸í•´ì„œ ì €ì¥í•œë‹¤.<br>
    ```c++
    vector<vector<int>> arr; // ì „ì—­ë³€ìˆ˜

    // ë©”ì¸í•¨ìˆ˜ ë‚´ 
    cin >> N >> M >> K;

    arr.resize(N + 1, vector<int>(M + 1, 0));
    for (int r = 1; r <= N; r++) {
        for (int c = 1; c <= M; c++) {
            cin >> arr[r][c];
        }
    }
    ```
    <br>
1. **`vector<int>(3)` í˜•ì‹ìœ¼ë¡œ íšŒì „ ì—°ì‚° ì €ì¥**<br>
    ì…ë ¥ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” íšŒì „ ì—°ì‚° ì •ë³´ë¥¼ 1ì°¨ì› ë²¡í„°ë¥¼ ì„ ì–¸í•´ì„œ ì €ì¥í•œë‹¤.<br>
    ```c++
    vector<vector<int>> ops; // ì „ì—­ë³€ìˆ˜

    // ë©”ì¸í•¨ìˆ˜ ë‚´ 
    cin >> N >> M >> K;

    ops.resize(K, vector<int>(3, 0));
    for (int i = 0; i < K; i++) {
        cin >> ops[i][0] >> ops[i][1] >> ops[i][2];
    }
    ``` 
    <br>
1. **ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ í™•ì¸ì„ ìœ„í•´ `next_permutation()` ì‚¬ìš©**<br>
    ì—°ì‚°ì„ í•˜ëŠ” ëª¨ë“  ìˆœì„œ í™•ì¸<br>
    <mark>ì—¬ê¸°ì„œ ì£¼ì˜ í• ì ì€ `next_permutation()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•´ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤.</mark>
    ```c++
    int solution() {
        int answer = 50 * 50 * 100;

        sort(ops.begin(), ops.end());
        do {
            apply_op(answer);
        } while(next_permutation(ops.begin(), ops.end()));

        return answer;
    }
    ```
    <br>
1. **ì—°ì‚° ì ìš©ì„ ìœ„í•´ `apply_op()` í•¨ìˆ˜ ì‘ì„±**<br>
    <br>
    ë³€ìˆ˜ `i`ë¥¼ ì„ íƒí•  ìœ„ì¹˜ì˜ ê°œìˆ˜ë¡œ ë‘ê³  1ê°œì—ì„œ ë¶€í„° N - 1ê°œ ê¹Œì§€ ì„ íƒí•˜ë„ë¡ ì„¤ì •<br>
    ```c++
    // íšŒì „ ì—°ì‚° ì ìš©
    void apply_op(int& answer) {
        vector<vector<int>> arr_copy = arr;

        for (auto op : ops) {

            int r = op[0];
            int c = op[1];
            int s = op[2];
            int side_length = 2 * s + 1;

            pair<int, int> bottom_right{r + s, c + s};
            pair<int, int> point {r - s, c - s};
            while (side_length > 1) {
                
                // ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ í™•ì¸í•˜ë©° ê°’ ë‹¹ê¸°ê¸°
                int temp = arr_copy[point.first][point.second];
                for (int r = point.first; r < bottom_right.first; r++) {
                    arr_copy[r][point.second] = arr_copy[r + 1][point.second];
                }
                for (int c = point.second; c < bottom_right.second; c++) {
                    arr_copy[bottom_right.first][c] = arr_copy[bottom_right.first][c + 1];
                }
                for (int r = bottom_right.first; r > point.first; r--) {
                    arr_copy[r][bottom_right.second] = arr_copy[r - 1][bottom_right.second];
                }
                for (int c = bottom_right.second; c > point.second; c--) {
                    arr_copy[point.first][c] = arr_copy[point.first][c - 1];
                }
                arr_copy[point.first][point.second + 1] = temp;

                side_length -= 2;
                point.first += 1;
                point.second += 1;
                bottom_right.first -= 1;
                bottom_right.second -= 1;
        
            }
        }
        compare_answer(answer, arr_copy);
    }
    ```
    <br>

### ì „ì²´ ì½”ë“œ
```c++
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

int N, M, K; 
vector<vector<int>> arr;
vector<vector<int>> ops;

void compare_answer(int& answer, vector<vector<int>>& arr_copy) {
    for (int r = 1; r <= N; r++) {
        int r_sum = 0;
        for (int c = 1; c <= M; c++) {
            r_sum += arr_copy[r][c];
        }

        answer = min(answer, r_sum);
    }
}

// íšŒì „ ì—°ì‚° ì ìš©
void apply_op(int& answer) {
    vector<vector<int>> arr_copy = arr;

    for (auto op : ops) {

        int r = op[0];
        int c = op[1];
        int s = op[2];
        int side_length = 2 * s + 1;

        pair<int, int> bottom_right{r + s, c + s};
        pair<int, int> point {r - s, c - s};
        while (side_length > 1) {
            
            // ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ í™•ì¸í•˜ë©° ê°’ ë‹¹ê¸°ê¸°
            int temp = arr_copy[point.first][point.second];
            for (int r = point.first; r < bottom_right.first; r++) {
                arr_copy[r][point.second] = arr_copy[r + 1][point.second];
            }
            for (int c = point.second; c < bottom_right.second; c++) {
                arr_copy[bottom_right.first][c] = arr_copy[bottom_right.first][c + 1];
            }
            for (int r = bottom_right.first; r > point.first; r--) {
                arr_copy[r][bottom_right.second] = arr_copy[r - 1][bottom_right.second];
            }
            for (int c = bottom_right.second; c > point.second; c--) {
                arr_copy[point.first][c] = arr_copy[point.first][c - 1];
            }
            arr_copy[point.first][point.second + 1] = temp;

            side_length -= 2;
            point.first += 1;
            point.second += 1;
            bottom_right.first -= 1;
            bottom_right.second -= 1;
    
        }
    }
    compare_answer(answer, arr_copy);
}

// ëª¨ë“  ê°€ëŠ¥ì„± í™•ì¸
int solution() {
    int answer = 50 * 50 * 100;

    sort(ops.begin(), ops.end());
    do {
        apply_op(answer);
    } while(next_permutation(ops.begin(), ops.end()));

    return answer;
}

int main() {
    cin >> N >> M >> K;

    arr.resize(N + 1, vector<int>(M + 1, 0));
    for (int r = 1; r <= N; r++) {
        for (int c = 1; c <= M; c++) {
            cin >> arr[r][c];
        }
    }

    ops.resize(K, vector<int>(3, 0));
    for (int i = 0; i < K; i++) {
        cin >> ops[i][0] >> ops[i][1] >> ops[i][2];
    }

    cout << solution() << endl;
    
    return 0;
}
```
